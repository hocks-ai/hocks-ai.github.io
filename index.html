<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HOCKS AI - Home</title>
<!-- Firebase SDK v8.10.0 -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

<script>
  // Firebase Configuration - SAME AS OTHER FILES
  const firebaseConfig = {
    apiKey: "AIzaSyC_-SRh3aovs5YWULB0qzhYKWLJvIH8FYs",
    authDomain: "hocks-ai-a377c.firebaseapp.com",
    projectId: "hocks-ai-a377c",
    storageBucket: "hocks-ai-a377c.firebasestorage.app",
    messagingSenderId: "667039824852",
    appId: "1:667039824852:web:7ca1bd8bdf02e97cbe3441",
    measurementId: "G-PC95919LET"
  };

  // Initialize Firebase - v8.10.0 STYLE
  const app = firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();
  
  console.log("Firebase initialized in index.html");

  // Check user authentication state - v8.10.0 STYLE
  document.addEventListener('DOMContentLoaded', function() {
    auth.onAuthStateChanged(function(user) {
      console.log("Auth state changed. User:", user ? user.email : "No user");
      
      if (user) {
        // User is signed in
        showUserInfo(user);
      } else {
        // User is signed out
        showAuthButtons();
      }
    });
  });

  // Show user info when logged in
  function showUserInfo(user) {
    const authButtons = document.getElementById("authButtons");
    const userInfo = document.getElementById("userInfo");
    const userName = document.getElementById("userName");
    const userEmail = document.getElementById("userEmail");
    const userAvatar = document.getElementById("avatarInitial");
    
    console.log("Showing user info for:", user.email);
    
    if (authButtons) authButtons.style.display = "none";
    if (userInfo) userInfo.style.display = "flex";
    
    if (userName) {
      userName.textContent = user.displayName || user.email.split('@')[0];
    }
    
    if (userEmail) {
      userEmail.textContent = user.email;
    }
    
    if (userAvatar && user.email) {
      userAvatar.textContent = user.email.charAt(0).toUpperCase();
    }
    
    // Update dashboard
    const dashboardUserName = document.getElementById("dashboardUserName");
    if (dashboardUserName) {
      dashboardUserName.textContent = user.displayName || user.email.split('@')[0];
    }
  }

  // Show authentication buttons when logged out
  function showAuthButtons() {
    const authButtons = document.getElementById("authButtons");
    const userInfo = document.getElementById("userInfo");
    const protectedContent = document.getElementById("protectedContent");
    const loginPrompt = document.getElementById("loginPrompt");
    
    console.log("Showing auth buttons");
    
    if (authButtons) authButtons.style.display = "flex";
    if (userInfo) userInfo.style.display = "none";
    
    if (protectedContent) protectedContent.style.display = "none";
    if (loginPrompt) loginPrompt.style.display = "block";
  }

  // Logout function
  function logoutUser() {
    console.log("Logging out...");
    auth.signOut()
      .then(function() {
        console.log("Logout successful");
        window.location.reload();
      })
      .catch(function(error) {
        console.error("Logout error:", error);
        alert("Logout failed: " + error.message);
      });
  }

  // Load user profile from Firestore
  function loadUserProfile(userId) {
    console.log("Loading profile for:", userId);
    db.collection("users").doc(userId).get()
      .then(function(doc) {
        if (doc.exists) {
          const userData = doc.data();
          console.log("User data loaded:", userData);
          updateUIWithUserData(userData);
        } else {
          console.log("No user data found in Firestore");
        }
      })
      .catch(function(error) {
        console.error("Error loading user profile:", error);
      });
  }

  // Update UI with user data
  function updateUIWithUserData(userData) {
    console.log("Updating UI with:", userData);
    const userCreditsElement = document.getElementById("userCredits");
    const userPlanElement = document.getElementById("userPlan");
    
    if (userCreditsElement && userData.credits !== undefined) {
      userCreditsElement.textContent = userData.credits;
    }
    
    if (userPlanElement && userData.plan) {
      userPlanElement.textContent = userData.plan.toUpperCase();
      userPlanElement.className = "plan-badge plan-" + userData.plan;
    }
  }

  // Send verification email
  function sendVerificationEmail() {
    const user = auth.currentUser;
    if (user) {
      user.sendEmailVerification()
        .then(function() {
          alert("Verification email sent! Please check your inbox.");
        })
        .catch(function(error) {
          console.error("Error sending verification email:", error);
        });
    }
  }
</script>

<style>
  /* আপনার existing CSS styles এখানে রাখুন */
  /* আমি শুধু relevant parts দেখাচ্ছি */
  
  /* Navigation Styles */
  .navbar {
    background: rgba(20, 20, 20, 0.95);
    padding: 20px 40px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 2px solid #00ff9d;
  }

  .logo {
    display: flex;
    align-items: center;
    gap: 15px;
    font-size: 28px;
    font-weight: 700;
    background: linear-gradient(135deg, #00ff9d, #00d4ff);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .nav-links {
    display: flex;
    gap: 30px;
    align-items: center;
  }

  /* Auth Buttons */
  .auth-buttons {
    display: flex;
    gap: 15px;
    align-items: center;
  }

  .btn-login {
    padding: 10px 25px;
    background: transparent;
    border: 2px solid #00ff9d;
    color: #00ff9d;
    border-radius: 25px;
    text-decoration: none;
    font-weight: 600;
    transition: all 0.3s ease;
  }

  .btn-login:hover {
    background: rgba(0, 255, 157, 0.1);
  }

  .btn-signup {
    padding: 10px 25px;
    background: linear-gradient(135deg, #00ff9d, #00d4ff);
    color: #0a0a0a;
    border-radius: 25px;
    text-decoration: none;
    font-weight: 600;
    transition: all 0.3s ease;
  }

  .btn-signup:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 30px rgba(0, 255, 157, 0.4);
  }

  /* User Info */
  .user-info {
    display: none;
    align-items: center;
    gap: 15px;
  }

  .user-avatar {
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, #00ff9d, #00d4ff);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    color: #0a0a0a;
  }

  .user-details {
    display: flex;
    flex-direction: column;
  }

  .user-name {
    font-weight: 600;
  }

  .user-email {
    font-size: 12px;
    color: rgba(255, 255, 255, 0.7);
  }

  .btn-logout {
    padding: 8px 20px;
    background: transparent;
    border: 2px solid #ff4d4d;
    color: #ff4d4d;
    border-radius: 25px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
  }

  .btn-logout:hover {
    background: rgba(255, 77, 77, 0.1);
  }
</style>
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar">
    <div class="logo">
      <span>⚡</span>
      <span>HOCKS AI</span>
    </div>
    
    <div class="nav-links">
      <a href="#home">Home</a>
      <a href="#features">Features</a>
      <a href="#dashboard">Dashboard</a>
      
      <!-- Auth Buttons (shown when logged out) -->
      <div id="authButtons" class="auth-buttons">
        <a href="login.html" class="btn-login">Login</a>
        <a href="signup.html" class="btn-signup">Sign Up</a>
      </div>
      
      <!-- User Info (shown when logged in) -->
      <div id="userInfo" class="user-info" style="display: none;">
        <div class="user-avatar">
          <span id="avatarInitial">U</span>
        </div>
        <div class="user-details">
          <div class="user-name" id="userName">User</div>
          <div class="user-email" id="userEmail">user@example.com</div>
        </div>
        <button class="btn-logout" onclick="logoutUser()">Logout</button>
      </div>
    </div>
  </nav>

  <!-- Rest of your index.html content -->
  <div style="padding: 50px; text-align: center;">
    <h1>Welcome to HOCKS AI</h1>
    <p>Your AI-powered solution</p>
    
    <!-- Protected Content -->
    <div id="protectedContent" style="display: none; margin-top: 50px;">
      <h2>Welcome to your Dashboard</h2>
      <p>You are logged in as: <span id="dashboardUserName"></span></p>
    </div>
    
    <!-- Login Prompt -->
    <div id="loginPrompt" style="display: none; margin-top: 50px;">
      <h2>Please Login</h2>
      <p>Login to access your dashboard</p>
      <div style="margin-top: 20px;">
        <a href="login.html" class="btn-login">Login</a>
        <a href="signup.html" class="btn-signup">Sign Up</a>
      </div>
    </div>
  </div>

  <script>
    // Initialize on page load
    document.addEventListener('DOMContentLoaded', function() {
      console.log("Page loaded");
      
      // Check initial auth state
      const user = auth.currentUser;
      if (user) {
        console.log("Initial user:", user.email);
        showUserInfo(user);
        loadUserProfile(user.uid);
        
        // Show protected content
        const protectedContent = document.getElementById("protectedContent");
        const loginPrompt = document.getElementById("loginPrompt");
        if (protectedContent) protectedContent.style.display = "block";
        if (loginPrompt) loginPrompt.style.display = "none";
      } else {
        console.log("No initial user");
        showAuthButtons();
      }
      
      // Test links
      console.log("Testing navigation links...");
      const loginLink = document.querySelector('a[href="login.html"]');
      const signupLink = document.querySelector('a[href="signup.html"]');
      if (loginLink) console.log("Login link found");
      if (signupLink) console.log("Signup link found");
    });
  </script>
</body>
         </html>
